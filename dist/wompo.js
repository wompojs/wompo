const ae=!1;let E=null,$=0;const g="$wc$",v="wc-wc",z=/<\/?$/g,T=/\s+([^\s]*?)=(["'][^"']*?)?$/g,F=/(<([a-z]*-[a-z]*).*?)\/?>/gs,R=/<(?<tag>script|style|textarea|title])(?!.*?<\/\k<tag>)/gi,j=/^(?:script|style|textarea|title)$/i,H=0,w=1,W=2,P=typeof global<"u",O=P?{createTreeWalker(){}}:document,x=O.createTreeWalker(O,129),U=["class","style","id","title"],b={};class q{template;dependencies;constructor(e,o){this.template=e,this.dependencies=o}clone(){const e=this.template.content,o=this.dependencies,i=document.importNode(e,!0);x.currentNode=i;let t=x.nextNode(),r=0,a=0,n=o[0];const l=[];for(;n!==void 0;){if(r===n.index){let c;const d=n.type;d===H?c=new S(t,t.nextSibling):d===w?c=new K(t,n):d===W&&(c=new Z(t)),l.push(c),n=o[++a]}r!==n?.index&&(t=x.nextNode(),r++)}return x.currentNode=document,[i,l]}}class M{values;parts;template;index;renderHtml;key;constructor(e,o,i){this.values=e.values,this.renderHtml=e,this.parts=e.parts,this.template=o,this.index=i,this.key=e.key}}class S{startNode;endNode;isNode=!0;isAttr=!1;isTag=!1;constructor(e,o){this.startNode=e,this.endNode=o}clearValue(){let e=this.startNode.nextSibling;for(;e&&e!==this.endNode;)e.remove(),e=this.startNode.nextSibling}dispose(){this.clearValue(),this.startNode.remove(),this.endNode&&this.endNode.remove()}}class K{node;name;attrStructure;isNode=!1;isAttr=!0;isTag=!1;__callback;__eventInitialized=!1;constructor(e,o){this.node=e,this.name=o.name,this.attrStructure=o.attrDynamics}updateValue(e){if(this.name==="ref"&&e.__wcRef){e.current=this.node;return}const o=this.node._$wompo;o&&this.node.updateProp(this.name,e);const i=e!==Object(e);if(e===!1||e===null||e===void 0)this.node.removeAttribute(this.name);else if(i&&(!this.name.match(/[A-Z]/)||this.node.nodeName==="svg")&&this.name!=="title")this.node.setAttribute(this.name,e);else if(this.name==="style"){let t="";const r=Object.keys(e);for(const a of r){let n=e[a],l=a.replace(/[A-Z]/g,c=>"-"+c.toLowerCase());typeof n=="number"&&(n=`${n}px`),n!=null&&n!==!1&&n!==""&&(t+=`${l}:${n};`)}this.node.setAttribute(this.name,t)}this.name==="title"&&o&&this.node.removeAttribute(this.name)}set callback(e){if(!this.__eventInitialized){const o=this.name.substring(1);this.node.addEventListener(o,this.__listener.bind(this),e?.options),this.__eventInitialized=!0}this.__callback=typeof e=="function"?e:e?.fn}__listener(e){this.__callback&&this.__callback(e)}}class Z{node;isNode=!1;isAttr=!1;isTag=!0;constructor(e){this.node=e}}class B{nodes;_$wompoChildren=!0;constructor(e){this.nodes=e}}class G{dynamics;isArrayDependency=!0;__oldValues;__oldPureValues;__parentDependency;__owner;__isKeyed;constructor(e,o,i){this.dynamics=[],this.__oldValues=[],this.__parentDependency=o,this.__owner=i,this.__isKeyed=Array.isArray(e)&&e.every(t=>t.key),o.startNode.after(document.createComment("?wc-end")),this.addDependenciesFrom(o.startNode,e),this.__oldPureValues=e}addDependenciesFrom(e,o){let i=e;for(let t=0;t<o.length;t++){const r=o[t];i.after(document.createTextNode("")),i.after(document.createTextNode(""));const a=new S(i.nextSibling,i.nextSibling.nextSibling);i=i.nextSibling.nextSibling,this.dynamics.push(a),this.__oldValues.push(k([a],[r],[],this.__owner)[0])}}updateNormalArray(e){const o=this.__oldValues.length;let i=e.length-o;if(i<0)for(;i;){const t=this.dynamics.pop();this.__oldValues.pop(),t.dispose(),i++}for(let t=0;t<this.dynamics.length;t++){const r=e[t],a=this.dynamics[t],n=this.__oldValues[t];this.__oldValues[t]=k([a],[r],[n],this.__owner)[0]}if(i>0){let t=this.dynamics[this.dynamics.length-1]?.endNode;t||(t=this.__parentDependency.startNode);for(let r=0;r<i;r++){const a=e[o+r];t.after(document.createTextNode("")),t.after(document.createTextNode(""));const n=new S(t.nextSibling,t.nextSibling.nextSibling);t=t.nextSibling.nextSibling,this.dynamics.push(n),this.__oldValues.push(k([n],[a],[],this.__owner))}}return this.__oldPureValues=e,this}updateKeyedArray(e){const o=this.__oldValues,i=this.dynamics,t=new Map;for(let c=0;c<o.length;c++){const d=o[c]?.key;d!==void 0&&!t.has(d)&&t.set(d,c)}const r=[],a=[],n=new Set;for(let c=0;c<e.length;c++){const d=e[c],p=d?.key;if(p!==void 0&&t.has(p)){const u=t.get(p);n.add(u);const m=i[u],h=o[u],[f]=k([m],[d],[h],this.__owner);r.push(m),a.push(f)}else{let u=r.length>0?r[r.length-1].endNode:this.__parentDependency.startNode;u.after(document.createTextNode("")),u.after(document.createTextNode(""));const m=new S(u.nextSibling,u.nextSibling.nextSibling),[h]=k([m],[d],[],this.__owner);r.push(m),a.push(h)}}for(let c=0;c<i.length;c++)n.has(c)||i[c].dispose();let l=this.__parentDependency.startNode;for(const c of r){if(l.nextSibling!==c.startNode){const d=document.createDocumentFragment();let p=c.startNode;const u=c.endNode.nextSibling;for(;p&&p!==u;){const m=p.nextSibling;d.appendChild(p),p=m}l.after(d)}l=c.endNode}return this.dynamics=r,this.__oldValues=a,this.__oldPureValues=e,this}handleArray(e){const o=Array.isArray(e)&&e.every(i=>i.key);return this.__isKeyed&&o?this.updateKeyedArray(e):(this.__isKeyed=!1,this.updateNormalArray(e)),this.__isKeyed=o,this}checkUpdates(e){return e===this.__oldPureValues?this:this.handleArray(e)}}const Y=(s,e)=>{const{css:o}=s,{shadow:i,name:t,cssModule:r}=e,a=t,n={};let l=o;return r&&(o.includes(":host")||(l=`${i?":host":a} {display:block;} ${o}`),i||(l=l.replace(/:host/g,a)),l=l.replace(/\.(?!\d)([_a-zA-Z0-9-]+)/gm,(c,d)=>{const p=`${a}__${d}`;return n[d]=p,`.${p}`})),[l,n]},J=s=>{let e="";const o=[],i=s.length-1;let t="",r="";for(let a=0;a<i;a++){let n=s[a];if(t&&n.includes(t)&&(t=""),r&&new RegExp(`</${r}>`)&&(r=""),t||r)e+=n+g;else{T.lastIndex=0;const l=T.exec(n);if(l){const[c,d]=l,p=c[c.length-1],u=c.lastIndexOf('"')>c.lastIndexOf("'")?'"':"'";if(!t){t=p==="="?"":u,n=n.replace(/=([^=]*)$/g,h=>`${g}=${h.substring(1)}`);let m=n;t?m+=g:m+='"0"',e+=m}o.push(d)}else{if(n.match(z)){e+=n+v;continue}R.lastIndex=0;const c=R.exec(n);c?(r=c[1],e+=n+g):e+=n+`<?${g}>`}}}return e+=s[s.length-1],e=e.replace(F,(a,n,l)=>a.endsWith("/>")?`${n}></${l}>`:a),e=e.replace(/<[a-z]*-[a-z]*\s?.*?>/gms,a=>a.replace(/(?<=\s)([a-z]+([A-Z][a-z]*)+)[=\s]/gms,n=>n.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`))),[e,o]},Q=(s,e,o)=>{const i=[];x.currentNode=s.content;let t,r=0,a=0;const n=e.length;for(;(t=x.nextNode())!==null&&i.length<n;){if(t.nodeType===1){if(t.nodeName===v.toUpperCase()){const l={type:W,index:a};i.push(l)}if(t.hasAttributes()){const l=t.getAttributeNames();for(const c of l)if(c.endsWith(g)){const d=o[r++],p=t.getAttribute(c);if(p!=="0"){const u=p.split(g);for(let m=0;m<u.length-1;m++){const h={type:w,index:a,attrDynamics:p,name:d};i.push(h)}}else{const u={type:w,index:a,name:d};i.push(u)}t.removeAttribute(c)}}if(j.test(t.tagName)){const l=t.textContent.split(g),c=l.length-1;if(c>0){t.textContent="";for(let d=0;d<c;d++)t.append(l[d],document.createComment("")),x.nextNode(),i.push({type:H,index:++a});t.append(l[c],document.createComment(""))}}}else t.nodeType===8&&t.data===`?${g}`&&i.push({type:H,index:a});a++}return i},D=s=>{const[e,o]=J(s.parts),i=document.createElement("template");i.innerHTML=e;const t=Q(i,s.parts,o);return new q(i,t)},X=(s,e)=>{if(!s||!e)return!1;const o=s.parts,i=e.parts;if(s.key&&e.key&&s.key===e.key)return!0;if(o.length!==i?.length)return!1;const t=s.values,r=e.values;for(let a=0;a<o.length;a++)if(o[a]!==i[a]||t[a]?._$wompoF&&(!r[a]?._$wompoF||t[a].componentName!==r[a].componentName))return!1;return!0},ee=(s,e,o)=>{const i=s!==e,t=!!o.attrStructure,a=s?._$wompoChildren&&o.startNode.nextSibling!==s.nodes[0],n=s===e&&o.isTag&&o.node.nodeName===v.toUpperCase();return i||t||a||n},V=(s,e,o,i,t)=>{const r=e.node;let a=null;const n=s._$wompoF,l=n?s.componentName:s;if(r.nodeName!==l.toUpperCase()){const c=r.getAttributeNames();if(n){const u={};for(const h of c){const f=r.getAttribute(h);let y=h;y.includes("-")&&(y=y.replace(/-(.)/g,(C,_)=>_.toUpperCase())),u[y]=f===""?!0:f}a=new s.class,a._$initialProps=u,a.props=u;const m=r.childNodes;for(;m.length;)a.appendChild(m[0])}else{a=document.createElement(l);for(const u of c)a.setAttribute(u,r.getAttribute(u))}let d=o,p=i[d];for(;p?.node===r;)p.node=a,d===o?(d++,p=i[d]):(p?.name&&p?.name!=="ref"&&(a._$initialProps[p.name]=t[d],a.props[p.name]=t[d]),d++,p=i[d]);return r.replaceWith(a),a}return r},I=(s,e)=>{const o=document.createTextNode(""),i=document.createTextNode("");s.appendChild(o),o.after(i);const t=new S(o,i);return e._$portals.push(t),t},k=(s,e,o,i)=>{const t=[...e];for(let r=0;r<s.length;r++){const a=s[r],n=t[r],l=o[r];if(n?.__wcRef&&a.isAttr&&a.name==="ref"&&(n.current=a.node),!!ee(n,l,a)){if(a.isNode){if(n===!1||n===void 0||n===null){a.clearValue();continue}if(n?._$wompoHtml){const u=n,m=l;if(m===void 0||!X(u,m?.renderHtml)){const f=D(u).clone(),[y,C]=f;t[r]=new M(u,f,r),t[r].values=k(C,u.values,[],i);let _=a;m?.renderHtml?._$portal?_.dispose():_.clearValue(),u._$portal&&(_=I(u._$portal,i),s[r]=_);let N=_.startNode;for(;y.childNodes.length&&N;)N.after(y.childNodes[0]),N=N.nextSibling}else if(m.template){const[h,f]=l.template,y=k(f,u.values,m.values,i);u._$portal&&i._$portals.push(a),m.values=y,t[r]=l}else{const f=D(u).clone();t[r]=new M(u,f,r);const y=t[r],C=k(y.template[1],u.values,[],i);if(y.values=C,u._$portal){const _=I(u._$portal,i);s[r]=_}}continue}const c=n!==Object(n),d=l!==Object(l)&&l!==void 0,p=a.startNode;if(c)d?p.nextSibling?p.nextSibling.textContent=n:p.after(n):(a.clearValue(),p.after(n));else{let u=p.nextSibling,m=0,h=0;if(n._$wompoChildren){l&&!l?._$wompoChildren&&a.clearValue();const f=n.nodes;for(;h<f.length;){(!u||h===0)&&(u=p);const y=f[m];m++,u.after(y),u=u.nextSibling,h++}}else Array.isArray(n)&&(l?.isArrayDependency?t[r]=l.checkUpdates(n):(a.clearValue(),t[r]=new G(n,a,i)))}}else if(a.isAttr){const c=a.name;if(c.startsWith("@"))a.callback=n;else if(c.startsWith(".")){const d=c.substring(1);if(d==="innerHTML"){const p=a.node,u=p.ownerDocument;if(p.isContentEditable){const m=u.activeElement,h=u.getSelection&&u.getSelection(),f=m===p||m&&p.contains(m);let y=!1;if(h&&h.rangeCount>0){const _=h.getRangeAt(0).commonAncestorContainer;y=p.contains(_)}if(f||y)continue}}a.node[d]=n}else{const d=a.attrStructure;if(d){const p=d.split(g);let u=n;for(let m=0;m<p.length-1;m++){const h=u!=null&&u!==!1?u:"";p[m]=`${p[m]}${h}`,r++,u=t[r]}r--,a.updateValue(p.join("").trim())}else a.updateValue(n)}}else if(a.isTag)if(n._$wompoLazy){const d=a.node,p=A(d);p&&(p.addSuspense?p.addSuspense(d):(p.loadingComponents=new Set,p.loadingComponents.add(d)),d.suspense=p),n().then(u=>{const m=V(u,a,r,s,e);p&&p.removeSuspense(d,m)});continue}else V(n,a,r,s,e)}}return t},te=(s,e)=>{const{generatedCSS:o,styles:i}=s.options,t=new CSSStyleSheet;t.replaceSync(o);let r=HTMLElement;const a=class extends r{static _$wompo=!0;static componentName=e.name;static _$cachedTemplate;static _$getOrCreateTemplate(n){return this._$cachedTemplate||(this._$cachedTemplate=D(n)),this._$cachedTemplate}_$wompo=!0;props={};hooks=[];_$measurePerf=!1;_$initialProps={};_$usesContext=!1;_$hasBeenMoved=!1;_$layoutEffects=[];_$effects=[];_$asyncCalls=[];_$suspendedAsyncCalls=[];__ROOT;__dynamics;__updating=!1;__oldValues=[];_$portals=[];__isInitializing=!0;__connected=!1;__disconnected=!1;__isInDOM=!1;constructor(){super()}connectedCallback(){if(this.__disconnected&&this.isConnected){this.__disconnected=!1;for(const n of this.hooks)n?.callback&&Promise.resolve().then(()=>{n.callback()});if(this._$suspendedAsyncCalls.length){const n=A(this),l=[];for(const c of this._$suspendedAsyncCalls)c.activateSuspense&&n?.addSuspense(this),l.push(c.asyncCallback().then(d=>{c.value=d}));this._$suspendedAsyncCalls=[],Promise.all(l).then(()=>{this.requestRender(),n?.removeSuspense(this)})}this._$hasBeenMoved=!0,this._$usesContext&&this.requestRender()}this.__isInDOM=!0,!this.__connected&&this.isConnected&&this.__initElement()}disconnectedCallback(){this.__connected&&(this.__isInDOM=!1,Promise.resolve().then(()=>{if(this.__isInDOM)this._$hasBeenMoved=!0,this._$usesContext&&this.requestRender();else{this.onDisconnected(),this.__disconnected=!0;for(const n of this.hooks)n?.cleanupFunction&&n.cleanupFunction();for(const n of this._$portals)n.dispose()}}))}adoptedCallback(){Object.setPrototypeOf(this,a.prototype);const n=document.createElement("style");n.textContent=o;const l=this.nodeName.toLowerCase();if(b[l]||(b[l]=[]),e.shadow)b[l].includes(this.__ROOT)||(b[l].push(this.__ROOT),this.__ROOT.appendChild(n));else{const c=this.getRootNode();b[l].includes(c)||(b[l].push(c),c.body?c.body.appendChild(n):c.appendChild(n))}}onDisconnected(){}__initElement(){this.__ROOT=this,this.props={...this.props,...this._$initialProps,styles:i};const n=this.getAttributeNames();for(const m of n){let h=m;if(h.includes("-")&&(h=h.replace(/-(.)/g,(f,y)=>y.toUpperCase())),!this.props.hasOwnProperty(h)){const f=this.getAttribute(m);this.props[h]=f===""?!0:f}}const l=Object.keys(this._$initialProps);for(const m of l){const h=this._$initialProps[m];h!==Object(h)&&(h||h===0)&&m!=="title"&&this.setAttribute(m.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`),h.toString())}const c=this.__ROOT.childNodes,d=[];for(;c.length;)d.push(c[0]),c[0].remove();const p=new B(d);this.props.children=p,e.shadow&&!this.shadowRoot&&(this.__ROOT=this.attachShadow({mode:"open"}));const u=this.nodeName.toLowerCase();if(b[u]||(b[u]=[]),e.shadow)b[u].includes(this.__ROOT)||(b[u].push(this.__ROOT),this.__ROOT.adoptedStyleSheets=[t]);else{const m=this.getRootNode();b[u].includes(m)||(b[u].push(m),m.adoptedStyleSheets.push(t))}this.__render(),this.__isInitializing=!1,this.__connected=!0,new MutationObserver(m=>{this.__updating||m.forEach(h=>{if(!U.includes(h.attributeName)){let f=h.attributeName;f.includes("-")&&(f=f.replace(/-(.)/g,(C,_)=>_.toUpperCase()));const y=this.getAttribute(h.attributeName);this.props[f]!=y&&this.updateProp(f,this.getAttribute(h.attributeName))}})}).observe(this,{attributes:!0})}__callComponent(){E=this,$=0;const n=s.call(this,this.props);let l=n;return(typeof n=="string"||n instanceof HTMLElement)&&(l=html`${n}`),l}__render(){try{const n=this.__callComponent();if(n==null){this.__dynamics=[],this.__oldValues=[],this.remove();return}const l=this.constructor;if(this._$portals=[],this.__isInitializing){const c=l._$getOrCreateTemplate(n),[d,p]=c.clone();this.__dynamics=p;const u=k(this.__dynamics,n.values,this.__oldValues,this);for(this.__oldValues=u,this.__isInitializing||(this.__ROOT.innerHTML="");d.childNodes.length;)this.__ROOT.appendChild(d.childNodes[0])}else{const c=k(this.__dynamics,n.values,this.__oldValues,this);this.__oldValues=c}for(const c of this._$layoutEffects)c.cleanupFunction=c.callback();this._$layoutEffects=[],Promise.resolve().then(()=>{if(this.isConnected){for(const c of this._$effects)c.cleanupFunction=c.callback();if(this._$effects=[],this._$asyncCalls.length){const c=[],d=A(this);for(const p of this._$asyncCalls){p.activateSuspense&&d?.addSuspense(this);const u=p.asyncCallback().then(m=>{p.value=m}).catch(m=>console.error(m));c.push(u)}Promise.all(c).then(()=>{d?.removeSuspense(this),this.requestRender()})}this._$asyncCalls=[]}else this._$suspendedAsyncCalls=this._$asyncCalls})}catch(n){console.error(n)}}requestRender(){this.__updating||(this.__updating=!0,Promise.resolve().then(()=>{this.__render(),this.__updating=!1,this._$hasBeenMoved=!1}))}updateProp(n,l){if(this.props[n]!==l){const c=l!==Object(l),d=n.replace(/[A-Z]/g,p=>"-"+p.toLowerCase());c&&l!==void 0&&l!==null&&l!==!1?this.setAttribute(d,l):this.removeAttribute(d),this.props[n]=l,this.__isInitializing||this.requestRender()}}};return a};export const useHook=()=>{const o=[E,$];return $++,o},useState=s=>{const[e,o]=useHook();if(!e)return typeof s=="function"?[s(),()=>{}]:[s,()=>{}];if(!e.hooks.hasOwnProperty(o)){const t=o;e.hooks[t]=[typeof s=="function"?s():s,r=>{let a=r;const n=e.hooks[t];typeof r=="function"&&(a=r(n[0])),a!==n[0]&&(n[0]=a,e.requestRender())}]}return e.hooks[o]},useEffect=(s,e=null)=>{const[o,i]=useHook();if(o.hooks.hasOwnProperty(i)){const t=o.hooks[i];if(e!==null){for(let r=0;r<e.length;r++)if(t.dependencies[r]!==e[r]){typeof t.cleanupFunction=="function"&&t.cleanupFunction(),t.dependencies=e,t.callback=s,o._$effects.push(t);break}}else t.callback=s,o._$effects.push(t)}else{const t={dependencies:e,callback:s,cleanupFunction:null};o.hooks[i]=t,o._$effects.push(t)}},useLayoutEffect=(s,e=null)=>{const[o,i]=useHook();if(o.hooks.hasOwnProperty(i)){const t=o.hooks[i];if(e!==null){for(let r=0;r<e.length;r++)if(t.dependencies[r]!==e[r]){typeof t.cleanupFunction=="function"&&t.cleanupFunction(),t.dependencies=e,t.callback=s,o._$layoutEffects.push(t);break}}else t.callback=s,o._$layoutEffects.push(t)}else{const t={dependencies:e,callback:s,cleanupFunction:null};o.hooks[i]=t,o._$layoutEffects.push(t)}},useRef=(s=null)=>{const[e,o]=useHook();return e.hooks.hasOwnProperty(o)||(e.hooks[o]={current:s,__wcRef:!0}),e.hooks[o]},useCallback=(s,e=[])=>{const[o,i]=useHook();if(!o.hooks.hasOwnProperty(i))o.hooks[i]={dependencies:e,value:s};else{const r=o.hooks[i];for(let a=0;a<e.length;a++)if(r.dependencies[a]!==e[a]){r.dependencies=e,r.value=s;break}}return o.hooks[i].value};const oe=()=>{let s=0;return()=>{const[e,o]=useHook();return e.hooks.hasOwnProperty(o)||(e.hooks[o]=`:w${s}:`,s++),e.hooks[o]}};export const useId=oe(),useMemo=(s,e)=>{const[o,i]=useHook();if(!o.hooks.hasOwnProperty(i))o.hooks[i]={value:s(),dependencies:e};else{const r=o.hooks[i];for(let a=0;a<e.length;a++)if(r.dependencies[a]!==e[a]){r.dependencies=e,r.value=s();break}}return o.hooks[i].value},useReducer=(s,e)=>{const[o,i]=useHook(),t=i;if(!o.hooks.hasOwnProperty(t)){const n=[e,l=>{const c=o.hooks[t][0],d=s(c,l);let p=d;typeof c=="object"&&!Array.isArray(c)&&c!==null&&(p={...c,...d}),o.hooks[i][0]=p,p!==c&&o.requestRender()}];o.hooks[i]=n}return o.hooks[i]},useExposed=s=>{const e=E,o=Object.keys(s);for(const i of o)e[i]=s[i]};const L=(s,e,o,i)=>{const[t,r]=s,a=t.hooks[r];a.activateSuspense=i,a.value=null,a.asyncCallback=e,a.dependencies=o,t._$asyncCalls.push(a)};export const useAsync=(s,e,o=!0)=>{const[i,t]=useHook();if(!i.hooks.hasOwnProperty(t))i.hooks[t]={asyncCallback:s,dependencies:e,value:null,activateSuspense:o},L([i,t],s,e,o);else{const r=i.hooks[t];let a=!1;for(let n=0;n<e.length;n++)if(r.dependencies[n]!==e[n]){a=!0;break}a&&L([i,t],s,e,o)}return i.hooks[t].value},useSelf=()=>E;const ne=()=>{let s=0;return(e,o)=>{const i=o??`wompo-context-provider-${s}`;s++;const t=defineWompo(({children:a,value:n})=>{const c=useRef(new Set);return useEffect(()=>{c.current.forEach(d=>{d.isConnected&&d.requestRender()})},[n]),useExposed({subscribers:c}),html`${a}`},{name:i,cssModule:!1});return{name:i,Provider:t,default:e,subscribers:new Set}}};export const createContext=ne(),useContext=s=>{const[e,o]=useHook();if(!e.hooks.hasOwnProperty(o)||e._$hasBeenMoved){let t=e;const r=s.name.toUpperCase();for(;t&&t.nodeName!==r&&t!==document.body;)t instanceof ShadowRoot?t=t.host:t=t.parentNode;const a=e.hooks[o]?.node;if(t&&t!==document.body){if(t.subscribers.current.add(e),!e._$usesContext){const n=e.onDisconnected;e.onDisconnected=()=>{t.subscribers.current.delete(e),n()}}e._$usesContext=!0}else a?(t=null,a.subscribers.current.delete(e)):e.isConnected&&(console.warn(`The element ${e.tagName} doens't have access to the Context ${s.name}. The default value will be returned instead.`),t=null);e.hooks[o]={node:t}}const i=e.hooks[o].node;return i?i.props.value:s.default};export function html(s,...e){const o=[],i=s.length-1;if(P)o.push(...e);else for(let t=0;t<i;t++)s[t].endsWith("</")||o.push(e[t]);return{parts:s,values:o,_$wompoHtml:!0}}export const wompoDefaultOptions={shadow:!1,name:"",cssModule:!0},registeredComponents={};export function defineWompo(s,e){s.css||(s.css="");const o={...wompoDefaultOptions,...e||{}};if(!o.name){let r=s.name.replace(/.[A-Z]/g,a=>`${a[0]}-${a[1].toLowerCase()}`).toLowerCase();r.includes("-")||(r+="-wompo"),o.name=r}s.componentName=o.name,s._$wompoF=!0;const[i,t]=Y(s,o);if(s.css=i,s.options={generatedCSS:i,styles:t,shadow:o.shadow},!P){const r=te(s,o);s.class=r,customElements.define(o.name,r)}return registeredComponents[o.name]=s,s}export const lazy=s=>{let e=null;async function o(){if(!e)try{return e=(await s()).default,e}catch(i){console.error(i)}return e}return o._$wompoLazy=!0,o},unsafelyRenderString=s=>({_$wompoHtml:!0,parts:[s],values:[]}),createPortal=(s,e)=>({...s,_$portal:e});const A=s=>{let e=s;for(;e&&e.nodeName!==Suspense.componentName.toUpperCase();)e.parentNode===null&&e.host?e=e.host:e=e?.parentNode;return e};export function Suspense({children:s,fallback:e}){return this.loadingComponents||(this.loadingComponents=useRef(new Set).current),this.addSuspense=o=>{this.loadingComponents.size||this.requestRender(),this.loadingComponents.add(o)},this.removeSuspense=(o,i=null)=>{if(this.loadingComponents.delete(o),i){for(let t=0;t<s.nodes.length;t++)if(s.nodes[t]===o){s.nodes[t]=i;break}}this.loadingComponents.size||this.requestRender()},this.loadingComponents.size&&e?html`${e}`:html`${s}`}defineWompo(Suspense,{name:"wompo-suspense"});
